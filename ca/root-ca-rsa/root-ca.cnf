[ default ]
name              = root-ca
domain_suffix     = localhost
aia_url           = http://crl.localhost/root-ca-rsa.crt
crl_url           = http://crl.localhost/root-ca-rsa.crl
ocsp_url          = http://ocsp.localhost
default_ca        = ca_root
name_opt          = utf8,esc_ctrl,multiline,lname,align

[ ca_root ]
dir               = .
database          = $dir/db/index
serial            = $dir/db/serial
crlnumber         = $dir/db/crlnumber
private_key       = $dir/private/$name.key
certificate       = $dir/certs/$name.crt
RANDFILE          = $dir/private/random
new_certs_dir     = $dir/issuedcerts
unique_subject    = no
copy_extensions   = none
default_days      = 3650
default_crl_days  = 30
default_md        = sha256
preserve          = no
policy            = policy_c_o_match

[ policy_c_o_match ]
countryName             = match
stateOrProvinceName     = optional
organizationName        = match
organizationalUnitName  = optional
commonName              = supplied
emailAddress            = optional

[ root_ca_ext ]
basicConstraints        = critical, CA:true
keyUsage                = critical, keyCertSign, cRLSign
subjectKeyIdentifier    = hash
authorityKeyIdentifier  = keyid:always

[ issuing_ca_ext ]
basicConstraints        = critical, CA:true, pathlen:0
keyUsage                = critical, keyCertSign, cRLSign
subjectKeyIdentifier    = hash
authorityKeyIdentifier  = keyid:always
authorityInfoAccess     = @issuer_info
crlDistributionPoints   = @crl_info
nameConstraints         = critical, @name_constraints
# domain validated (we can get away with this for demo purposes since we only issue certs for .localhost)
# required by baseline requirements but could be considered as optional as private scope
# also optional in recent NIST TLS guideline DRAFT v2
#certificatePolicies	= 2.23.140.1.2.1

[ crl_info ]
URI.0                   = $crl_url

[ issuer_info ]
caIssuers;URI.0         = $aia_url
OCSP;URI.0              = $ocsp_url

[ name_constraints ]
permitted;DNS.0=.localhost
excluded;IP.0=0.0.0.0/0.0.0.0
excluded;IP.1=0:0:0:0:0:0:0:0/0:0:0:0:0:0:0:0

[ ocsp_ext ]
basicConstraints 	= critical, CA:FALSE
keyUsage 		= critical, digitalSignature
extendedKeyUsage 	= OCSPSigning
subjectKeyIdentifier 	= hash
authorityKeyIdentifier 	= keyid:always
noCheck          	= yes
certificatePolicies	= 2.23.140.1.2.1
